{"ast":null,"code":"import{json,redirect}from\"react-router-dom\";import QuoteForm from\"../quotes/QuoteForm\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function NewQuote(){return/*#__PURE__*/_jsx(QuoteForm,{});}export async function action(_ref){let{request,params}=_ref;const data=await request.formData();const quoteData={author:data.get(\"author\"),text:data.get(\"text\"),id:\"\".concat(data.get(\"author\").replace(/\\s+/g,\"\")).concat(Math.floor(Math.random()*100))};const response=await fetch(\"https://quotes-d8df2-default-rtdb.asia-southeast1.firebasedatabase.app/quotes.json\",{method:\"POST\",body:JSON.stringify(quoteData),header:{\"Content-Type\":\"application/json\"}});// const response = await fetch(\n//   `https://movie-312bd-default-rtdb.asia-southeast1.firebasedatabase.app/movies/.json`,\n//   {\n//     method: \"POST\",\n//     body: JSON.stringify({ title, openingText, releaseDate }),\n//     header: { \"Content-Type\": \"application/json\" },\n//   }\n// );\nif(!response.ok){throw json({message:\"Fail to send data\"},{status:500});}return redirect(\"/quotes\");}","map":{"version":3,"names":["json","redirect","QuoteForm","jsx","_jsx","NewQuote","action","_ref","request","params","data","formData","quoteData","author","get","text","id","concat","replace","Math","floor","random","response","fetch","method","body","JSON","stringify","header","ok","message","status"],"sources":["D:/WORK/Submit/RJS301x_1.0-A_VN/Lab/Lab 18.1/Lab 18.1/src/components/quotes-test/NewQuote.jsx"],"sourcesContent":["import { json, redirect } from \"react-router-dom\";\r\nimport QuoteForm from \"../quotes/QuoteForm\";\r\n\r\nexport default function NewQuote() {\r\n  return <QuoteForm></QuoteForm>;\r\n}\r\n\r\nexport async function action({ request, params }) {\r\n  const data = await request.formData();\r\n  const quoteData = {\r\n    author: data.get(\"author\"),\r\n    text: data.get(\"text\"),\r\n    id: `${data.get(\"author\").replace(/\\s+/g, \"\")}${Math.floor(\r\n      Math.random() * 100\r\n    )}`,\r\n  };\r\n  const response = await fetch(\r\n    \"https://quotes-d8df2-default-rtdb.asia-southeast1.firebasedatabase.app/quotes.json\",\r\n    {\r\n      method: \"POST\",\r\n      body: JSON.stringify(quoteData),\r\n      header: { \"Content-Type\": \"application/json\" },\r\n    }\r\n  );\r\n  // const response = await fetch(\r\n  //   `https://movie-312bd-default-rtdb.asia-southeast1.firebasedatabase.app/movies/.json`,\r\n  //   {\r\n  //     method: \"POST\",\r\n  //     body: JSON.stringify({ title, openingText, releaseDate }),\r\n  //     header: { \"Content-Type\": \"application/json\" },\r\n  //   }\r\n  // );\r\n  if (!response.ok) {\r\n    throw json({ message: \"Fail to send data\" }, { status: 500 });\r\n  }\r\n  return redirect(\"/quotes\");\r\n}\r\n"],"mappings":"AAAA,OAASA,IAAI,CAAEC,QAAQ,KAAQ,kBAAkB,CACjD,MAAO,CAAAC,SAAS,KAAM,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,cAAe,SAAS,CAAAC,QAAQA,CAAA,CAAG,CACjC,mBAAOD,IAAA,CAACF,SAAS,GAAY,CAAC,CAChC,CAEA,MAAO,eAAe,CAAAI,MAAMA,CAAAC,IAAA,CAAsB,IAArB,CAAEC,OAAO,CAAEC,MAAO,CAAC,CAAAF,IAAA,CAC9C,KAAM,CAAAG,IAAI,CAAG,KAAM,CAAAF,OAAO,CAACG,QAAQ,CAAC,CAAC,CACrC,KAAM,CAAAC,SAAS,CAAG,CAChBC,MAAM,CAAEH,IAAI,CAACI,GAAG,CAAC,QAAQ,CAAC,CAC1BC,IAAI,CAAEL,IAAI,CAACI,GAAG,CAAC,MAAM,CAAC,CACtBE,EAAE,IAAAC,MAAA,CAAKP,IAAI,CAACI,GAAG,CAAC,QAAQ,CAAC,CAACI,OAAO,CAAC,MAAM,CAAE,EAAE,CAAC,EAAAD,MAAA,CAAGE,IAAI,CAACC,KAAK,CACxDD,IAAI,CAACE,MAAM,CAAC,CAAC,CAAG,GAClB,CAAC,CACH,CAAC,CACD,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAC1B,oFAAoF,CACpF,CACEC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACf,SAAS,CAAC,CAC/BgB,MAAM,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAC/C,CACF,CAAC,CACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAI,CAACN,QAAQ,CAACO,EAAE,CAAE,CAChB,KAAM,CAAA7B,IAAI,CAAC,CAAE8B,OAAO,CAAE,mBAAoB,CAAC,CAAE,CAAEC,MAAM,CAAE,GAAI,CAAC,CAAC,CAC/D,CACA,MAAO,CAAA9B,QAAQ,CAAC,SAAS,CAAC,CAC5B","ignoreList":[]},"metadata":{},"sourceType":"module"}